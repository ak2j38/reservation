## 콘서트 예약 서비스

### 개요
- 콘서트 예약 서비스 시나리오
- 대기열 시스템을 구축하고, 예약 서비스는 작업 가능한 유저만 수행할 수 있도록 처리
- 사용자는 좌석 예약 시에 미리 충전한 잔액을 이용
- 좌석 예약 요청 시에, 결제가 이루어지지 않더라도 일정 시간동안 다른 유저가 해당 좌석에 접근할 수 없도록 처리
---

### 요구사항
- 5가지 API 구현
  - 예약 가능 날짜/좌석 API (콘서트 조회)
  - 좌석 예약 요청 API
  - 포인트 충전/조회 API
  - 결제 API
  - 유저 대기열 토큰 발급 API
- 각 기능 및 제약사항에 대해 단위 테스트를 반드시 하나 이상 작성
- 다수의 인스턴스로 운영되는 환경을 가정하여 설계
- 동시성 이슈를 고려해 구현
- 대기열 개념을 고려해 구현
---

### API Specs
- 예약 가능 날짜/좌석 API (콘서트 조회)
  - 예약 가능한 날짜와 해당 날짜의 좌석을 조회하는 API를 각각 작성
  - 예약 가능한 날짜 목록 조회
  - 날짜 정보를 입력받아 예약가능한 좌석정보를 조회
  - 좌석 정보는 1~50번까지 존재
- 좌석 예약 요청 API
  - 날짜와 좌석 정보를 입력받아 좌석을 예약 처리하는 API
  - 좌석 예약과 동시에 해당 좌석은 그 유저에게 5분간 임시 배정(정책에 따라 자율적으로 정의 - 유연함 필요)
  - 만약 배정 시간 내에 결제가 완료되지 않는다면 좌석에 대한 임시 배정은 해제되어야 하며 다른 사용자는 예약 가능해야함
- 포인트 충전/조회 API
  - 결제에 사용될 포인트를 충전하는 API
  - 사용자 식별자 및 충전할 금액을 받아 포인트 충전
  - 사용자 식별자를 통해 해당 사용자의 포인트를 조회
- 결제 API
  - 결제 처리하고 결제 내역을 생성하는 API
  - 결제가 완료되면 해당 좌석의 소유권을 유저에게 배정하고 대기열 토큰을 만료
---

### 심화 API Specs
- 유저 대기열 토큰 발급 API
  - 서비스를 이용할 토큰을 발급받는 API
  - 토큰은 유저의 UUID와 해당 유저의 대기열을 관리할 수 있는 정보(대기 순서 or 잔여 시간)을 포함
  - 모든 API는 위 토큰을 이용해 대기열 검증을 통과해야 이용 가능
  - 기본적으로는 폴링으로 확인하지만, 다른 방안 고려하고 구현 가능
- 대기열 고도화
  - 다양한 전략을 통해 합리적으로 대기열을 제공할 방법을 고안
  - ex) 특정 시간 동안 N명에게만 권한을 부여
  - ex) 한 번에 활성화된 최대 유저를 N으로 유지
---
